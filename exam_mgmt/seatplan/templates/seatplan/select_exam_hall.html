{% load static %}
<!DOCTYPE html>
<html>
<head>
    <title>Select Exam & Hall</title>
    <link rel="stylesheet" href="{% static 'seatplan/css/main.css' %}">
</head>

<body>
<div class="navbar">Select Exam & Hall</div>

<div class="container">
    <form method="POST" onsubmit="return confirmSeatGeneration()">
        {% csrf_token %}

        <label><b>Select Exam:</b></label><br>
        <select name="exam_id">
            {% for exam in exams %}
                <option value="{{ exam.id }}">{{ exam.subject }} — ({{ exam.semester }})</option>
            {% endfor %}
        </select>
        <br><br>

        <label><b>Select Hall:</b></label><br>
        <select name="hall_id">
            {% for hall in halls %}
                <option value="{{ hall.id }}">{{ hall.name }} ({{ hall.rows }}×{{ hall.cols }})</option>
            {% endfor %}
        </select>
        <br><br>

        <button class="btn">Generate Seat Plan</button>
    </form>
    
    <div id="hall-action" style="margin-top:12px;">
        <!-- JS will populate a create link here when needed -->
    </div>

    {# JSON data for client-side logic #}
    {{ exams_json|json_script:"exams-data" }}
    {{ halls_json|json_script:"halls-data" }}
    {% if selected_hall_id %}
        <input type="hidden" id="selected-hall-id" value="{{ selected_hall_id }}">
    {% endif %}
</div>

<script src="{% static 'seatplan/js/main.js' %}"></script>
</body>
</html>
